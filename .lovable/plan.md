

# ะะปะฐะฝ: ะฃะผะฝัะต CTA ะบะฝะพะฟะบะธ + ะกะบัััะธะต ะฐะฟัะตะนะป-ัะพะฒะฐัะพะฒ ะธะท Shop

## ะะพะฝะธะผะฐะฝะธะต ะทะฐะดะฐัะธ

**ะะฐะฟัะพั 1**: ะัะธ ะฟะพะฒัะพัะฝะพะผ ะฝะฐะถะฐัะธะธ ะฝะฐ Add to Cart/Add to Order/Add to Bag โ ะตัะปะธ ัะพะฒะฐั ัะถะต ะฒ ะบะพัะทะธะฝะต, ะพัะบััะฒะฐัั ะบะพัะทะธะฝั ะฒะผะตััะพ ะดะพะฑะฐะฒะปะตะฝะธั ะตัั ัะฐะท

**ะะฐะฟัะพั 2**: ะขะพะฒะฐัั, ะธัะฟะพะปัะทัะตะผัะต ะบะฐะบ ะฐะฟัะตะนะปั (ะฝะฐัััะพะตะฝะฝัะต ะฒ metafield), ะฝะต ะดะพะปะถะฝั ะพัะพะฑัะฐะถะฐัััั ะฒ ะพัะฝะพะฒะฝะพะน ะณะฐะปะตัะตะต ะผะฐะณะฐะทะธะฝะฐ (Shop page)

---

## ะงะฐััั 1: ะฃะผะฝัะต CTA ะบะฝะพะฟะบะธ

### ะขะตะบััะตะต ะฟะพะฒะตะดะตะฝะธะต
- `handleAddToCart()` ะฒัะตะณะดะฐ ะดะพะฑะฐะฒะปัะตั ัะพะฒะฐั
- ะัะปะธ ัะพะฒะฐั ัะถะต ะฒ ะบะพัะทะธะฝะต โ ัะฒะตะปะธัะธะฒะฐะตั ะบะพะปะธัะตััะฒะพ
- ะะตั ะฟัะพะฒะตัะบะธ "ัะถะต ะฒ ะบะพัะทะธะฝะต"

### ะะพะฒะพะต ะฟะพะฒะตะดะตะฝะธะต
```text
ะะตัะฒะพะต ะฝะฐะถะฐัะธะต:  ะขะพะฒะฐั ะดะพะฑะฐะฒะปัะตััั ะฒ ะบะพัะทะธะฝั โ
ะัะพัะพะต ะฝะฐะถะฐัะธะต:  ะัะบััะฒะฐะตััั ะบะพัะทะธะฝะฐ (Sheet drawer) โ
```

### ะะตะฐะปะธะทะฐัะธั

**1. ะะพะฑะฐะฒะธัั ะฟัะพะฒะตัะบั ะฒ cartStore**

ะะพะฑะฐะฒะธัั ััะฝะบัะธั `isInCart(variantId)`:
```tsx
// ะ cartStore.ts
isInCart: (variantId: string) => boolean;
// ...
isInCart: (variantId) => get().items.some(i => i.variantId === variantId),
```

**2. ะญะบัะฟะพััะธัะพะฒะฐัั ััะฝะบัะธั ะพัะบัััะธั ะบะพัะทะธะฝั**

ะกะตะนัะฐั ัะพััะพัะฝะธะต `isOpen` ะปะพะบะฐะปัะฝะพะต ะฒ `CartDrawer`. ะัะถะฝะพ ัะดะตะปะฐัั ะณะปะพะฑะฐะปัะฝัะผ:

```tsx
// ะะพะฒัะน store ะธะปะธ ัะฐััะธัะธัั cartStore
openCart: () => void;
isCartOpen: boolean;
setCartOpen: (open: boolean) => void;
```

**3. ะะทะผะตะฝะธัั ะปะพะณะธะบั ะฒ ProductPage**

```tsx
const { addItem, isInCart, openCart } = useCartStore();
const isAlreadyInCart = selectedVariant && isInCart(selectedVariant.id);

const handleAddToCart = async () => {
  if (isAlreadyInCart) {
    openCart(); // ะัะบัััั ะบะพัะทะธะฝั ะฒะผะตััะพ ะดะพะฑะฐะฒะปะตะฝะธั
    return;
  }
  // ... ัััะตััะฒัััะฐั ะปะพะณะธะบะฐ ะดะพะฑะฐะฒะปะตะฝะธั
};
```

**4. ะะทะผะตะฝะธัั ัะตะบัั ะบะฝะพะฟะบะธ**

```tsx
// ะัะปะธ ัะพะฒะฐั ัะถะต ะฒ ะบะพัะทะธะฝะต โ ะฟะพะบะฐะทะฐัั ะดััะณะพะน ัะตะบัั
{isAlreadyInCart ? t('product.viewCart') : t('product.addToCart')}
```

### ะงัะพ ะฟะพะปััะธััั

| ะกะพััะพัะฝะธะต | ะขะตะบัั ะบะฝะพะฟะบะธ | ะะตะนััะฒะธะต |
|-----------|--------------|----------|
| ะะต ะฒ ะบะพัะทะธะฝะต | "Add to Cart" | ะะพะฑะฐะฒะธัั + ัะพัั |
| ะฃะถะต ะฒ ะบะพัะทะธะฝะต | "View Cart" ะธะปะธ "In Cart โ" | ะัะบัััั drawer |

---

## ะงะฐััั 2: ะกะบัััะธะต ะฐะฟัะตะนะป-ัะพะฒะฐัะพะฒ ะธะท Shop

### ะัะพะฑะปะตะผะฐ
ะขะพะฒะฐัั, ะบะพัะพััะต ัะฒะปััััั ะฐะฟัะตะนะปะฐะผะธ, ะพัะพะฑัะฐะถะฐัััั ะธ ะฒ ะพะฑััะฝะพะน ะณะฐะปะตัะตะต ะผะฐะณะฐะทะธะฝะฐ. ะัะถะฝะพ ะฟะพะบะฐะทัะฒะฐัั ะธั ะขะะะฌะะ ะฒ ะผะพะดัะปะต ะฐะฟัะตะนะปะพะฒ.

### ะะตัะตะฝะธะต: ะขะตะณ ะฒ Shopify

ะกะฐะผัะน ะฝะฐะดัะถะฝัะน ัะฟะพัะพะฑ โ ะธัะฟะพะปัะทะพะฒะฐัั **ัะตะณะธ** ะฒ Shopify:

1. ะ Shopify Admin ะดะพะฑะฐะฒะธัั ัะตะณ `upsell-only` ัะพะฒะฐัะฐะผ-ะฐะฟัะตะนะปะฐะผ
2. ะะฐ ััะพะฝัะตะฝะดะต ัะธะปัััะพะฒะฐัั ัะพะฒะฐัั ั ััะธะผ ัะตะณะพะผ

### ะะตะฐะปะธะทะฐัะธั

**1. ะะฑะฝะพะฒะธัั GraphQL ะทะฐะฟัะพั ะดะปั ะฟะพะปััะตะฝะธั ัะตะณะพะฒ**

ะ `PRODUCTS_QUERY` ะดะพะฑะฐะฒะธัั `tags`:
```graphql
query GetProducts($first: Int!, $query: String) {
  products(first: $first, query: $query) {
    edges {
      node {
        id
        title
        # ... ัััะตััะฒัััะธะต ะฟะพะปั ...
        tags  # โ ะะพะฑะฐะฒะธัั
      }
    }
  }
}
```

**2. ะคะธะปัััะฐัะธั ะฝะฐ ััะพะฝัะตะฝะดะต ะฒ Shop.tsx**

```tsx
// ะััะธะปัััะพะฒะฐัั ัะพะฒะฐัั ั ัะตะณะพะผ "upsell-only"
const visibleProducts = products.filter(
  p => !p.node.tags?.includes('upsell-only')
);
```

### ะะปััะตัะฝะฐัะธะฒะฝัะน ะฒะฐัะธะฐะฝั: ะคะธะปัััะฐัะธั ัะตัะตะท GraphQL query

ะัะปะธ ะฒ Shopify ะตััั ะผะฝะพะณะพ ัะพะฒะฐัะพะฒ, ะผะพะถะฝะพ ัะธะปัััะพะฒะฐัั ะฝะฐ ััะพะฒะฝะต API:
```tsx
// ะ fetchProducts ะดะพะฑะฐะฒะธัั query ะฟะฐัะฐะผะตัั
const data = await fetchProducts(20, '-tag:upsell-only');
```

ะะพ ััะพ ััะตะฑัะตั, ััะพะฑั ะฒัะต ะฐะฟัะตะนะป-ัะพะฒะฐัั ะธะผะตะปะธ ัะตะณ. ะคัะพะฝัะตะฝะด-ัะธะปัััะฐัะธั ะฟัะพัะต ะดะปั ะฝะฐัะฐะปะฐ.

---

## ะคะฐะนะปั ะดะปั ะธะทะผะตะฝะตะฝะธั

| ะคะฐะนะป | ะะทะผะตะฝะตะฝะธั |
|------|-----------|
| `src/stores/cartStore.ts` | ะะพะฑะฐะฒะธัั `isInCart()`, `isCartOpen`, `setCartOpen()` |
| `src/components/CartDrawer.tsx` | ะัะฟะพะปัะทะพะฒะฐัั ะณะปะพะฑะฐะปัะฝะพะต ัะพััะพัะฝะธะต ะพัะบัััะธั |
| `src/pages/ProductPage.tsx` | ะะพะณะธะบะฐ "ะตัะปะธ ะฒ ะบะพัะทะธะฝะต โ ะพัะบัััั ะบะพัะทะธะฝั" |
| `src/lib/shopify.ts` | ะะพะฑะฐะฒะธัั `tags` ะฒ PRODUCTS_QUERY |
| `src/pages/Shop.tsx` | ะคะธะปัััะฐัะธั ัะพะฒะฐัะพะฒ ะฟะพ ัะตะณั |
| `src/i18n/locales/*.json` | ะะพะฑะฐะฒะธัั ะฟะตัะตะฒะพะดั ะดะปั "View Cart" / "In Cart" |

---

## ะงัะพ ัะตะฑะต ะฝัะถะฝะพ ัะดะตะปะฐัั ะฒ Shopify

ะะปั ัะบัััะธั ะฐะฟัะตะนะปะพะฒ ะธะท ะพัะฝะพะฒะฝะพะณะพ ะบะฐัะฐะปะพะณะฐ:

1. ะัะบัััั ัะพะฒะฐั-ะฐะฟัะตะนะป ะฒ Shopify Admin
2. ะ ัะตะบัะธะธ "Tags" ะดะพะฑะฐะฒะธัั: `upsell-only`
3. ะกะพััะฐะฝะธัั

ะัะต ัะพะฒะฐัั ั ััะธะผ ัะตะณะพะผ ะฑัะดัั ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะบัััั ะธะท Shop page, ะฝะพ ะพััะฐะฝัััั ะฒ ะผะพะดัะปะต ะฐะฟัะตะนะปะพะฒ.

---

## ะะธะทัะฐะปัะฝะฐั ััะตะผะฐ

```text
ะขะะะะ ะะ ะ ะะะะะะะ:
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   [ Add to Cart ]       โ  โ ะะฐะถะฐัะธะต โ ะดะพะฑะฐะฒะปัะตั
โโโโโโโโโโโโโโโโโโโโโโโโโโโ

ะขะะะะ ะฃะะ ะ ะะะะะะะ:
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   [ View Cart โ ]       โ  โ ะะฐะถะฐัะธะต โ ะพัะบััะฒะฐะตั drawer
โโโโโโโโโโโโโโโโโโโโโโโโโโโ
           โ
           โผ
    โโโโโโโโโโโโโโโโ
    โ  ๐ Cart     โ
    โ  โโโโโโโโโโ  โ
    โ  Collar x1   โ
    โ  โโโโโโโโโโ  โ
    โ  [Checkout]  โ
    โโโโโโโโโโโโโโโโ
```

